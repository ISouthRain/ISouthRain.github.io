<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>VPS 服务器搭建 Calibre 网页服务(不是 calibre-web) | ISouthRain Blog</title>
<meta name=keywords content="Calibre"><meta name=description content="预览
与 本地桌面版 开启的 Web 相同.

     


必要条件
Docker Calibre 占用资源大小:
硬件 >= 2GB
内存 >= 200MB
上传个人 Calibre Library
# 连接到服务器 bash
# 创建存放目录
mkdir -p ~/Calibre
mkdir -p ~/Calibre/addbooks
# 将本地个人的 Calibre 文件夹上传上传到 ~/Calibre/library 目录
# 一定是名称为 library 的目录, 否则会错误

# 提示
# 建议将个人的 Calibre 文件夹压缩成 .zip 上传到服务器
# 上传命令: scp -P 22 本地.zip user@xxx.xxx.xxx.xx:~/Calibre/library.zip
# 然后解压: unzip library.zip
# 解压完, 顶级目录名称一定要为 library
配置 docker 搭建
# 拉去镜像
docker run -d --name=calibre -v ~/Calibre:/data:Z -p 8080:8080 bcleonard/calibre
# 现在你可以在浏览器使用 http://yourip:8080 访问了
# 现在处于公开访问, 任何人都可以访问, 后面是进行用户认证, 不要公开访问
# 进入 容器 操作
docker exec -it calibre sh

# 创建 Calibre 用户, 按照提示输入
calibre-server --userdb /data/users.sqlite --manage-users

# 修改原本的启动方式, 并开启用户认证, 注意: 一定要在 容器内的 sh 更新 startup.sh 内容, 否则会导致启动容器失败.
sed -i '$d' /scripts/startup.sh && echo '/opt/calibre/calibre-server --userdb /data/users.sqlite --enable-auth --listen-on=&#34;0.0.0.0&#34; /data/library' >> /scripts/startup.sh

# 退出 容器exec
exit

# 回到了 服务器 bash 后
docker restart calibre

# 现在你可以在浏览器使用 http://yourip:8080 访问了
# 输入用户和密码

# 提示
# 只要以后  用户名  对上了, 就会 自动同步笔记.
# 后面备份只需要备份 library 目录即可, 用户sqlite 不必须备份, 后面迁移后同步笔记只要 重新创建对应 用户名 就OK了
下面方法已废弃, Web 服务器本身就有这功能.
有关 添加书籍 删除书籍 等功能, 详见: https://hub.docker.com/r/bcleonard/calibre"><meta name=author content="ISouthRain"><link rel=canonical href=https://isouthrain.github.io/zh-cn/post/20251010t221455--vps%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BAcalibre%E7%BD%91%E9%A1%B5%E6%9C%8D%E5%8A%A1__%E5%88%9B%E4%BD%9C/><link crossorigin=anonymous href=/assets/css/stylesheet.b48eb2edb122ccaadf7f09c0e4ad6aa280279f0cadf4b8d748cebe9c6aa92517.css integrity="sha256-tI6y7bEizKrffwnA5K1qooAnnwyt9LjXSM6+nGqpJRc=" rel="preload stylesheet" as=style><link rel=icon href=https://isouthrain.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://isouthrain.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://isouthrain.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://isouthrain.github.io/apple-touch-icon.png><link rel=mask-icon href=https://isouthrain.github.io/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://isouthrain.github.io/zh-cn/post/20251010t221455--vps%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BAcalibre%E7%BD%91%E9%A1%B5%E6%9C%8D%E5%8A%A1__%E5%88%9B%E4%BD%9C/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link href=https://fonts.cdnfonts.com/css/jetbrains-mono-2 rel=stylesheet><meta property="og:title" content="VPS 服务器搭建 Calibre 网页服务(不是 calibre-web)"><meta property="og:description" content="预览
与 本地桌面版 开启的 Web 相同.

     


必要条件
Docker Calibre 占用资源大小:
硬件 >= 2GB
内存 >= 200MB
上传个人 Calibre Library
# 连接到服务器 bash
# 创建存放目录
mkdir -p ~/Calibre
mkdir -p ~/Calibre/addbooks
# 将本地个人的 Calibre 文件夹上传上传到 ~/Calibre/library 目录
# 一定是名称为 library 的目录, 否则会错误

# 提示
# 建议将个人的 Calibre 文件夹压缩成 .zip 上传到服务器
# 上传命令: scp -P 22 本地.zip user@xxx.xxx.xxx.xx:~/Calibre/library.zip
# 然后解压: unzip library.zip
# 解压完, 顶级目录名称一定要为 library
配置 docker 搭建
# 拉去镜像
docker run -d --name=calibre -v ~/Calibre:/data:Z -p 8080:8080 bcleonard/calibre
# 现在你可以在浏览器使用 http://yourip:8080 访问了
# 现在处于公开访问, 任何人都可以访问, 后面是进行用户认证, 不要公开访问
# 进入 容器 操作
docker exec -it calibre sh

# 创建 Calibre 用户, 按照提示输入
calibre-server --userdb /data/users.sqlite --manage-users

# 修改原本的启动方式, 并开启用户认证, 注意: 一定要在 容器内的 sh 更新 startup.sh 内容, 否则会导致启动容器失败.
sed -i '$d' /scripts/startup.sh && echo '/opt/calibre/calibre-server --userdb /data/users.sqlite --enable-auth --listen-on=&#34;0.0.0.0&#34; /data/library' >> /scripts/startup.sh

# 退出 容器exec
exit

# 回到了 服务器 bash 后
docker restart calibre

# 现在你可以在浏览器使用 http://yourip:8080 访问了
# 输入用户和密码

# 提示
# 只要以后  用户名  对上了, 就会 自动同步笔记.
# 后面备份只需要备份 library 目录即可, 用户sqlite 不必须备份, 后面迁移后同步笔记只要 重新创建对应 用户名 就OK了
下面方法已废弃, Web 服务器本身就有这功能.
有关 添加书籍 删除书籍 等功能, 详见: https://hub.docker.com/r/bcleonard/calibre"><meta property="og:type" content="article"><meta property="og:url" content="https://isouthrain.github.io/zh-cn/post/20251010t221455--vps%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BAcalibre%E7%BD%91%E9%A1%B5%E6%9C%8D%E5%8A%A1__%E5%88%9B%E4%BD%9C/"><meta property="og:image" content="https://isouthrain.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-10-10T22:14:00+08:00"><meta property="article:modified_time" content="2025-10-10T23:54:04+08:00"><meta property="og:site_name" content="ISouthRain Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://isouthrain.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="VPS 服务器搭建 Calibre 网页服务(不是 calibre-web)"><meta name=twitter:description content="预览
与 本地桌面版 开启的 Web 相同.

     


必要条件
Docker Calibre 占用资源大小:
硬件 >= 2GB
内存 >= 200MB
上传个人 Calibre Library
# 连接到服务器 bash
# 创建存放目录
mkdir -p ~/Calibre
mkdir -p ~/Calibre/addbooks
# 将本地个人的 Calibre 文件夹上传上传到 ~/Calibre/library 目录
# 一定是名称为 library 的目录, 否则会错误

# 提示
# 建议将个人的 Calibre 文件夹压缩成 .zip 上传到服务器
# 上传命令: scp -P 22 本地.zip user@xxx.xxx.xxx.xx:~/Calibre/library.zip
# 然后解压: unzip library.zip
# 解压完, 顶级目录名称一定要为 library
配置 docker 搭建
# 拉去镜像
docker run -d --name=calibre -v ~/Calibre:/data:Z -p 8080:8080 bcleonard/calibre
# 现在你可以在浏览器使用 http://yourip:8080 访问了
# 现在处于公开访问, 任何人都可以访问, 后面是进行用户认证, 不要公开访问
# 进入 容器 操作
docker exec -it calibre sh

# 创建 Calibre 用户, 按照提示输入
calibre-server --userdb /data/users.sqlite --manage-users

# 修改原本的启动方式, 并开启用户认证, 注意: 一定要在 容器内的 sh 更新 startup.sh 内容, 否则会导致启动容器失败.
sed -i '$d' /scripts/startup.sh && echo '/opt/calibre/calibre-server --userdb /data/users.sqlite --enable-auth --listen-on=&#34;0.0.0.0&#34; /data/library' >> /scripts/startup.sh

# 退出 容器exec
exit

# 回到了 服务器 bash 后
docker restart calibre

# 现在你可以在浏览器使用 http://yourip:8080 访问了
# 输入用户和密码

# 提示
# 只要以后  用户名  对上了, 就会 自动同步笔记.
# 后面备份只需要备份 library 目录即可, 用户sqlite 不必须备份, 后面迁移后同步笔记只要 重新创建对应 用户名 就OK了
下面方法已废弃, Web 服务器本身就有这功能.
有关 添加书籍 删除书籍 等功能, 详见: https://hub.docker.com/r/bcleonard/calibre"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://isouthrain.github.io/zh-cn/post/"},{"@type":"ListItem","position":2,"name":"VPS 服务器搭建 Calibre 网页服务(不是 calibre-web)","item":"https://isouthrain.github.io/zh-cn/post/20251010t221455--vps%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BAcalibre%E7%BD%91%E9%A1%B5%E6%9C%8D%E5%8A%A1__%E5%88%9B%E4%BD%9C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"VPS 服务器搭建 Calibre 网页服务(不是 calibre-web)","name":"VPS 服务器搭建 Calibre 网页服务(不是 calibre-web)","description":"预览 与 本地桌面版 开启的 Web 相同.\n必要条件 Docker Calibre 占用资源大小:\n硬件 \u0026gt;= 2GB\n内存 \u0026gt;= 200MB\n上传个人 Calibre Library # 连接到服务器 bash # 创建存放目录 mkdir -p ~/Calibre mkdir -p ~/Calibre/addbooks # 将本地个人的 Calibre 文件夹上传上传到 ~/Calibre/library 目录 # 一定是名称为 library 的目录, 否则会错误 # 提示 # 建议将个人的 Calibre 文件夹压缩成 .zip 上传到服务器 # 上传命令: scp -P 22 本地.zip user@xxx.xxx.xxx.xx:~/Calibre/library.zip # 然后解压: unzip library.zip # 解压完, 顶级目录名称一定要为 library 配置 docker 搭建 # 拉去镜像 docker run -d --name=calibre -v ~/Calibre:/data:Z -p 8080:8080 bcleonard/calibre # 现在你可以在浏览器使用 http://yourip:8080 访问了 # 现在处于公开访问, 任何人都可以访问, 后面是进行用户认证, 不要公开访问 # 进入 容器 操作 docker exec -it calibre sh # 创建 Calibre 用户, 按照提示输入 calibre-server --userdb /data/users.sqlite --manage-users # 修改原本的启动方式, 并开启用户认证, 注意: 一定要在 容器内的 sh 更新 startup.sh 内容, 否则会导致启动容器失败. sed -i \u0026#39;$d\u0026#39; /scripts/startup.sh \u0026amp;\u0026amp; echo \u0026#39;/opt/calibre/calibre-server --userdb /data/users.sqlite --enable-auth --listen-on=\u0026#34;0.0.0.0\u0026#34; /data/library\u0026#39; \u0026gt;\u0026gt; /scripts/startup.sh # 退出 容器exec exit # 回到了 服务器 bash 后 docker restart calibre # 现在你可以在浏览器使用 http://yourip:8080 访问了 # 输入用户和密码 # 提示 # 只要以后 用户名 对上了, 就会 自动同步笔记. # 后面备份只需要备份 library 目录即可, 用户sqlite 不必须备份, 后面迁移后同步笔记只要 重新创建对应 用户名 就OK了 下面方法已废弃, Web 服务器本身就有这功能. 有关 添加书籍 删除书籍 等功能, 详见: https://hub.docker.com/r/bcleonard/calibre\n","keywords":["Calibre"],"articleBody":"预览 与 本地桌面版 开启的 Web 相同.\n必要条件 Docker Calibre 占用资源大小:\n硬件 \u003e= 2GB\n内存 \u003e= 200MB\n上传个人 Calibre Library # 连接到服务器 bash # 创建存放目录 mkdir -p ~/Calibre mkdir -p ~/Calibre/addbooks # 将本地个人的 Calibre 文件夹上传上传到 ~/Calibre/library 目录 # 一定是名称为 library 的目录, 否则会错误 # 提示 # 建议将个人的 Calibre 文件夹压缩成 .zip 上传到服务器 # 上传命令: scp -P 22 本地.zip user@xxx.xxx.xxx.xx:~/Calibre/library.zip # 然后解压: unzip library.zip # 解压完, 顶级目录名称一定要为 library 配置 docker 搭建 # 拉去镜像 docker run -d --name=calibre -v ~/Calibre:/data:Z -p 8080:8080 bcleonard/calibre # 现在你可以在浏览器使用 http://yourip:8080 访问了 # 现在处于公开访问, 任何人都可以访问, 后面是进行用户认证, 不要公开访问 # 进入 容器 操作 docker exec -it calibre sh # 创建 Calibre 用户, 按照提示输入 calibre-server --userdb /data/users.sqlite --manage-users # 修改原本的启动方式, 并开启用户认证, 注意: 一定要在 容器内的 sh 更新 startup.sh 内容, 否则会导致启动容器失败. sed -i '$d' /scripts/startup.sh \u0026\u0026 echo '/opt/calibre/calibre-server --userdb /data/users.sqlite --enable-auth --listen-on=\"0.0.0.0\" /data/library' \u003e\u003e /scripts/startup.sh # 退出 容器exec exit # 回到了 服务器 bash 后 docker restart calibre # 现在你可以在浏览器使用 http://yourip:8080 访问了 # 输入用户和密码 # 提示 # 只要以后 用户名 对上了, 就会 自动同步笔记. # 后面备份只需要备份 library 目录即可, 用户sqlite 不必须备份, 后面迁移后同步笔记只要 重新创建对应 用户名 就OK了 下面方法已废弃, Web 服务器本身就有这功能. 有关 添加书籍 删除书籍 等功能, 详见: https://hub.docker.com/r/bcleonard/calibre\n将书籍添加到图书馆 首先将你的书籍添加到 ~/addbooks 目录，每个目录添加一本（所有格式）。然后运行以下命令：\ndocker exec calibre /scripts/add-books.sh /home/books/addbooks 中的所有书籍都将添加到图书馆，从 /home/books/addbooks 目录中删除，并通知 calibre。\n要从图书馆中删除书籍： docker exec calibre /scripts/remove-books.sh -i 已知问题: 无法远程访问端口 无法进行 公网远程访问 只可以 本地IP 访问, 可以使用 VPN 访问时, 看看下面的方法, 亲测有用.\n理论上是可以远程访问的.\n原因是系统没有开启 内核路由转发功能, 参考: Linux服务器docker部署的容器，端口映射后公网无法访问-阿里云帮助中心\n# 检查当前状态，运行以下命令。 cat /proc/sys/net/ipv4/ip_forward # 如果返回值为1，则表示已启用。如果为0，请继续执行下一步。 # 临时启用该功能（重启后失效），请运行。 echo 1 \u003e /proc/sys/net/ipv4/ip_forward # 然后重启 calibre docker restart calibre 总结 这种方法不用占用太多资源也能体验到 本地桌面版的web 功能.\n而且 web 最大的好处时随时随地可阅读, 并且只要登陆的 用户名 是相同的, 就自动同步笔记.\n","wordCount":"241","inLanguage":"zh-cn","image":"https://isouthrain.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-10-10T22:14:00+08:00","dateModified":"2025-10-10T23:54:04+08:00","author":[{"@type":"Person","name":"ISouthRain"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://isouthrain.github.io/zh-cn/post/20251010t221455--vps%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BAcalibre%E7%BD%91%E9%A1%B5%E6%9C%8D%E5%8A%A1__%E5%88%9B%E4%BD%9C/"},"publisher":{"@type":"Organization","name":"ISouthRain Blog","logo":{"@type":"ImageObject","url":"https://isouthrain.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://isouthrain.github.io/zh-cn/ accesskey=h title="Home (Alt + H)"><img src=https://isouthrain.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://isouthrain.github.io/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://isouthrain.github.io/zh-cn/life/ title=MyLife><span>MyLife</span></a></li><li><a href=https://isouthrain.github.io/zh-cn/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://isouthrain.github.io/zh-cn/about/ title=About><span>About</span></a></li><li><a href=https://isouthrain.github.io/zh-cn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://github.com/ISouthRain title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://isouthrain.github.io/zh-cn/>Home</a>&nbsp;»&nbsp;<a href=https://isouthrain.github.io/zh-cn/post/>Posts</a></div><h1 class="post-title entry-hint-parent">VPS 服务器搭建 Calibre 网页服务(不是 calibre-web)</h1><div class=post-meta><span title='2025-10-10 22:14:00 +0800 +0800'>2025 年 10 月 10 日</span>&nbsp;·&nbsp;241 words&nbsp;·&nbsp;ISouthRain&nbsp;|&nbsp;<a href=https://github.com/ISouthRain/ISouthRain.github.io/content/post/20251010T221455--VPS%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%90%ad%e5%bb%baCalibre%e7%bd%91%e9%a1%b5%e6%9c%8d%e5%8a%a1__%e5%88%9b%e4%bd%9c.zh-cn.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e9%a2%84%e8%a7%88 aria-label=预览>预览</a></li><li><a href=#%e5%bf%85%e8%a6%81%e6%9d%a1%e4%bb%b6 aria-label=必要条件>必要条件</a></li><li><a href=#%e4%b8%8a%e4%bc%a0%e4%b8%aa%e4%ba%ba-calibre-library aria-label="上传个人 Calibre Library">上传个人 Calibre Library</a></li><li><a href=#%e9%85%8d%e7%bd%ae-docker-%e6%90%ad%e5%bb%ba aria-label="配置 docker 搭建">配置 docker 搭建</a></li><li><a href=#%e4%b8%8b%e9%9d%a2%e6%96%b9%e6%b3%95%e5%b7%b2%e5%ba%9f%e5%bc%83-web-%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%9c%ac%e8%ba%ab%e5%b0%b1%e6%9c%89%e8%bf%99%e5%8a%9f%e8%83%bd-dot aria-label="下面方法已废弃, Web 服务器本身就有这功能.">下面方法已废弃, Web 服务器本身就有这功能.</a></li><li><a href=#%e5%b7%b2%e7%9f%a5%e9%97%ae%e9%a2%98-%e6%97%a0%e6%b3%95%e8%bf%9c%e7%a8%8b%e8%ae%bf%e9%97%ae%e7%ab%af%e5%8f%a3 aria-label="已知问题: 无法远程访问端口">已知问题: 无法远程访问端口</a></li><li><a href=#%e6%80%bb%e7%bb%93 aria-label=总结>总结</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=预览>预览<a hidden class=anchor aria-hidden=true href=#预览>#</a></h2><p>与 本地桌面版 开启的 Web 相同.</p><figure><img loading=lazy src=/attach/20251010T221455--VPS%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%90%ad%e5%bb%baCalibre%e7%bd%91%e9%a1%b5%e6%9c%8d%e5%8a%a1__%e5%88%9b%e4%bd%9c.zh-cn/%e9%a2%84%e8%a7%88.png></figure><h2 id=必要条件>必要条件<a hidden class=anchor aria-hidden=true href=#必要条件>#</a></h2><p>Docker Calibre 占用资源大小:</p><p>硬件 >= 2GB</p><p>内存 >= 200MB</p><h2 id=上传个人-calibre-library>上传个人 Calibre Library<a hidden class=anchor aria-hidden=true href=#上传个人-calibre-library>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 连接到服务器 bash</span>
</span></span><span class=line><span class=cl><span class=c1># 创建存放目录</span>
</span></span><span class=line><span class=cl>mkdir -p ~/Calibre
</span></span><span class=line><span class=cl>mkdir -p ~/Calibre/addbooks
</span></span><span class=line><span class=cl><span class=c1># 将本地个人的 Calibre 文件夹上传上传到 ~/Calibre/library 目录</span>
</span></span><span class=line><span class=cl><span class=c1># 一定是名称为 library 的目录, 否则会错误</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 提示</span>
</span></span><span class=line><span class=cl><span class=c1># 建议将个人的 Calibre 文件夹压缩成 .zip 上传到服务器</span>
</span></span><span class=line><span class=cl><span class=c1># 上传命令: scp -P 22 本地.zip user@xxx.xxx.xxx.xx:~/Calibre/library.zip</span>
</span></span><span class=line><span class=cl><span class=c1># 然后解压: unzip library.zip</span>
</span></span><span class=line><span class=cl><span class=c1># 解压完, 顶级目录名称一定要为 library</span>
</span></span></code></pre></div><h2 id=配置-docker-搭建>配置 docker 搭建<a hidden class=anchor aria-hidden=true href=#配置-docker-搭建>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 拉去镜像</span>
</span></span><span class=line><span class=cl>docker run -d --name<span class=o>=</span>calibre -v ~/Calibre:/data:Z -p 8080:8080 bcleonard/calibre
</span></span><span class=line><span class=cl><span class=c1># 现在你可以在浏览器使用 http://yourip:8080 访问了</span>
</span></span><span class=line><span class=cl><span class=c1># 现在处于公开访问, 任何人都可以访问, 后面是进行用户认证, 不要公开访问</span>
</span></span><span class=line><span class=cl><span class=c1># 进入 容器 操作</span>
</span></span><span class=line><span class=cl>docker <span class=nb>exec</span> -it calibre sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建 Calibre 用户, 按照提示输入</span>
</span></span><span class=line><span class=cl>calibre-server --userdb /data/users.sqlite --manage-users
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 修改原本的启动方式, 并开启用户认证, 注意: 一定要在 容器内的 sh 更新 startup.sh 内容, 否则会导致启动容器失败.</span>
</span></span><span class=line><span class=cl>sed -i <span class=s1>&#39;$d&#39;</span> /scripts/startup.sh <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s1>&#39;/opt/calibre/calibre-server --userdb /data/users.sqlite --enable-auth --listen-on=&#34;0.0.0.0&#34; /data/library&#39;</span> &gt;&gt; /scripts/startup.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 退出 容器exec</span>
</span></span><span class=line><span class=cl><span class=nb>exit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 回到了 服务器 bash 后</span>
</span></span><span class=line><span class=cl>docker restart calibre
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 现在你可以在浏览器使用 http://yourip:8080 访问了</span>
</span></span><span class=line><span class=cl><span class=c1># 输入用户和密码</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 提示</span>
</span></span><span class=line><span class=cl><span class=c1># 只要以后  用户名  对上了, 就会 自动同步笔记.</span>
</span></span><span class=line><span class=cl><span class=c1># 后面备份只需要备份 library 目录即可, 用户sqlite 不必须备份, 后面迁移后同步笔记只要 重新创建对应 用户名 就OK了</span>
</span></span></code></pre></div><h2 id=下面方法已废弃-web-服务器本身就有这功能-dot>下面方法已废弃, Web 服务器本身就有这功能.<a hidden class=anchor aria-hidden=true href=#下面方法已废弃-web-服务器本身就有这功能-dot>#</a></h2><p>有关 <strong>添加书籍</strong> <strong>删除书籍</strong> 等功能, 详见: <a href=https://hub.docker.com/r/bcleonard/calibre>https://hub.docker.com/r/bcleonard/calibre</a></p><ol><li>将书籍添加到图书馆</li></ol><p>首先将你的书籍添加到 ~/addbooks 目录，每个目录添加一本（所有格式）。然后运行以下命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>docker <span class=nb>exec</span> calibre /scripts/add-books.sh
</span></span></code></pre></div><p>/home/books/addbooks 中的所有书籍都将添加到图书馆，从 /home/books/addbooks 目录中删除，并通知 calibre。</p><ol><li>要从图书馆中删除书籍：</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>docker <span class=nb>exec</span> calibre /scripts/remove-books.sh -i &lt;book_id&gt;
</span></span></code></pre></div><h2 id=已知问题-无法远程访问端口>已知问题: 无法远程访问端口<a hidden class=anchor aria-hidden=true href=#已知问题-无法远程访问端口>#</a></h2><p>无法进行 <strong>公网远程访问</strong> 只可以 <strong>本地IP</strong> 访问, 可以使用 VPN 访问时, 看看下面的方法, 亲测有用.</p><p>理论上是可以远程访问的.</p><p>原因是系统没有开启 <strong>内核路由转发功能</strong>, 参考: <a href=https://help.aliyun.com/zh/ecs/user-guide/internet-inaccessible-after-port-mapping-for-docker-containers-deployed-on-linux>Linux服务器docker部署的容器，端口映射后公网无法访问-阿里云帮助中心</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 检查当前状态，运行以下命令。</span>
</span></span><span class=line><span class=cl>cat /proc/sys/net/ipv4/ip_forward
</span></span><span class=line><span class=cl><span class=c1># 如果返回值为1，则表示已启用。如果为0，请继续执行下一步。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 临时启用该功能（重启后失效），请运行。</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=m>1</span> &gt; /proc/sys/net/ipv4/ip_forward
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 然后重启 calibre</span>
</span></span><span class=line><span class=cl>docker restart calibre
</span></span></code></pre></div><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>这种方法不用占用太多资源也能体验到 <code>本地桌面版的web</code> 功能.</p><p>而且 web 最大的好处时随时随地可阅读, 并且只要登陆的 <code>用户名</code> 是相同的, 就自动同步笔记.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://isouthrain.github.io/zh-cn/tags/calibre/>Calibre</a></li></ul><nav class=paginav><a class=next href=https://isouthrain.github.io/zh-cn/post/20251008t111736--emacs-%E6%95%B4%E7%90%86%E7%AC%94%E8%AE%B0%E6%9C%89%E6%84%9F__%E5%86%99%E4%BD%9C/><span class=title>»</span><br><span>Emacs 整理笔记有感</span></a></nav></footer><script src=https://utteranc.es/client.js repo=ISouthRain/ISouthRain.github.io issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://isouthrain.github.io/zh-cn/>ISouthRain Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><div class=footer><span class=poem_sentence></span>
<span class=poem_info></span></div><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script><script type=text/javascript>jinrishici.load(function(e){var t=document.querySelector(".poem_sentence"),n=document.querySelector(".poem_info");t.innerHTML=e.data.content,n.innerHTML="---- "+e.data.origin.author})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>